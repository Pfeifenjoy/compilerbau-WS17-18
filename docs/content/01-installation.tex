\chapter{Installation}

Im folgenden werden die Schritte zur Installation des Compilers beschrieben.

\section{Voraussetzungen}

Es werden folgende Programme benötigt.
\begin{itemize}
	\item GHC >= v8.0.1
	\item Cabal >= v1.24.0
	\item JRE >= 1.8
	\item Git >= 2.14.3
\end{itemize}

\section{Erstellungsprozess}

Um den Java Compiler zu bauen muss zuerst das Repository heruntergeladen werden.
Hierzu kann git verwendet werden. Falls Git nicht auf dem Rechner installiert ist,
kann das Repository alternativ auch über das WebUI von Github heruntergeladen werden.

\begin{lstlisting}[language=bash, caption={ Download des Projektes }]
git clone \
	-b 'v1.0.0' --single-branch --depth 1 \
	git@github.com:Pfeifenjoy/compilerbau-WS17-18.git
\end{lstlisting}

Dadurch wird das Repository in den Ordner \enquote{compilerbau-WS17-18} geladen.

Anschließend muss in den Ordner des Quellcodes gewechselt werden.
Dieser kann mit Hilfe von Cabal erstellt und installiert werden.
Durch \lstinline{cabal install} wird das Kommando \lstinline{jc} installiert.
Falls sich \lstinline{jc} nicht im Pfad befindet kann es alternativ mit \lstinline{cabal exec jc}
ausgeführt werden.
\begin{lstlisting}[language=bash, caption={Bauen des jc Kommandos}]
cd compilerbau-WS17-18/project
cabal configure
cabal build
cabal install
\end{lstlisting}

\section{Bedienung}
Das Programm \lstinline{jc} bekommt als Argument eine Liste von Java Quelldateien,
und generiert daraus Class-Files.
Mithilfe des flag \lstinline{-l LOG}, e.g. \lstinline{cabal exec jc -- -l log *.java},
wird eine log-Datei erstellt, welche die abstrakte Syntax etc. beinhaltet.
Eine genauere Beschreibung der Abstrakten Syntax ist unter
\lstinline{compilerbau-WS17-18/project/src/ABSTree.hs} zu finden.

Der Hilfetext aus \autoref{jc:help} kann mittels \lstinline{cabal exec jc -- -h}
generiert werden.

\begin{lstlisting}[label={jc:help}, caption={Hilfe jc}, language=bash]
usage : jc [source-files...] [-l  LOG] [-v] [-h] [--version]

mandatory arguments:
 source-files                  Path to the sources which are
                               compiled.

optional arguments:
 -l, --log  LOG                Specify log file.
 -v, --verbose                 Show extra information
 -h, --help                    show this help message and exit
 --version                     print the program version and exit
\end{lstlisting}
